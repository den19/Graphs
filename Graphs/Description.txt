Анализ задачи
У нас есть ориентированный взвешенный граф (веса неотрицательные, но могут быть пропуски, обозначенные -1).
Нужно найти максимальное кратчайшее расстояние между двумя любыми вершинами.

Иными словами:

Найти все кратчайшие расстояния между всеми парами вершин.

Выбрать максимальное среди них.

Это классическая задача поиска кратчайших путей между всеми парами вершин (All Pairs Shortest Paths, APSP).

Теоретическая база
Для решения APSP в графах с неотрицательными весами (но здесь есть -1 как "нет ребра") можно использовать:

Алгоритм Флойда–Уоршелла (Floyd–Warshall)

Время: O(N³)

Память: O(N²)

Работает с отрицательными весами, но без отрицательных циклов. У нас веса неотрицательные, так что подходит идеально.

Прост в реализации.

Альтернативно, можно запустить алгоритм Дейкстры из каждой вершины (N раз), но для N ≤ 100 и Флойд тоже подходит, и код проще.

План решения
Считаем N и матрицу смежности.

Заменим -1 на очень большое число (например, INF), обозначающее отсутствие пути.

Применим алгоритм Флойда–Уоршелла для поиска кратчайших расстояний между всеми парами.

Найдём максимальное значение среди всех конечных расстояний (кроме самой вершины до себя, т.е. исключая диагональ), которое не равно INF.

Выведем это максимальное расстояние.